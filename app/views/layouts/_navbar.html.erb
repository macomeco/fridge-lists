<%= content_tag :nav,'',id: 'nav-bar',style: " background-color:"+@theme.clr_main do%>
  <%= content_tag :ul, '' ,style:"color:"+@theme.clr_font do%>
    <li class="sub-menu">
      <div class="sub-menu-head"><%= content_tag(:div ,'', style:"color:"+@theme.clr_sub )do %><i class="fas fa-plus fa-2x"></i><a class="ml-2 btn btn-link ">モノ</a><% end %></div>
      <ul class="sub-menu-body" id="menu1">
        <li><%= render 'things/thing_form' %></li>
      </ul>
    </li>

    <li class="sub-menu">
      <div class="sub-menu-head"><%= content_tag(:div ,'', style:"color:"+@theme.clr_sub )do %><i class="fas fa-tag fa-2x"></i><a class="ml-2 btn btn-link">タグ</a><% end %></div>
      <ul class="sub-menu-body" id="menu2">
        <li><%= render 'tags/tags' , tags: @tags%></li>
      </ul>
    </li>
    
    <li class="sub-menu">
      <div class="sub-menu-head"><%= content_tag(:div ,'', style:"color:"+@theme.clr_sub )do %><i class="fas fa-search fa-2x"></i><a class="ml-2 btn btn-link">検索</a><% end %></div>
      <ul class="sub-menu-body" id="menu3">
        <li class="p-0"><%= render 'layouts/search', search_things: @search_things %></li>
      </ul>
    </li>
    <li class="sub-menu">
      <div class="sub-menu-head"><%= content_tag(:div ,'', style:"color:"+@theme.clr_sub )do %><i class="fas fa-clipboard-list fa-2x"></i></i><a class="ml-2 btn btn-link">リスト</a><% end %></div>
      <ul class="sub-menu-body" id="menu4">
        <li><%= render 'lists/lists' , lists: @lists%></li>
      </ul>
    </li>
    
    <li class="sub-menu">
      <div class="sub-menu-head"><%= content_tag(:div ,'', style:"color:"+@theme.clr_sub )do %><i class="fas fa-user fa-2x"></i><a class="ml-2 btn btn-link">ユーザー</a><% end %></div>
      <ul class="sub-menu-body" id="menu5">
        <li><%= render 'users/edit',user: current_user%></li>
      </ul>
    </li>
  <%end%>
<%end%>

<script>
  $(function(){
    $('.sub-menu-body').hide();

    //くっきの保存がされていたらそれをひらく
    for (var i = 1; i<= 5;i++){
      if($.cookie('menu') == 'menu'+i ){
        $('#menu'+ i ).show();
      }
    }
  
    $('.sub-menu-head').on('click', function(){
      $(this).next('.sub-menu-body').slideToggle();
      
      //くっきの設定  idの取得 
      $.cookie('menu', $(this).next('.sub-menu-body').attr('id'), {expires: 1 });

      var test= $(this).next('.sub-menu-body').attr('id');
      console.log(test);
        
      $('.sub-menu-body').not($(this).next('.sub-menu-body')).slideUp();
    })
  });
</script>

<style>
  ul {
    list-style: none;
    margin:0;
    padding:0;
    text-align:left;
  }

  li{
    padding:10px;
  }
  
  #nav-bar{
    width:100%;
    height:100%;
    background-color:#FFCCB1;
  }
  .sub-menu{
    margin:0px;
  }
  
</style>