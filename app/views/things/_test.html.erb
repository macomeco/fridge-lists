<% if @no == 0%>
<% @m = 'mb-0' %>
<%else%>
<% @m = 'mb-2'%>
<%end%>

<%=content_tag(:div,'', class:'target-card card '+@m,style:'border-color:'+@theme.clr_font) do %>

    <div class="tng-main row no-gutters">
        
        <%# ✓ %>
        <div class="col-md-1 px-auto w-100">
            <%= content_tag(:div,'',style: 'background-color:'+ @clr, class:'w-100 h-100 d-flex align-items-center') do %>
                <%= link_to tng , :method => :delete, data:{ confirm: tng.content+'を削除しますか？'},class: 'clr_sub_c text-center w-100' do %><i class="fa fa-check fa-sm"></i><%end%>
            <%end%>
        </div>

        <%#メイン%>
        <div class="col-md-6 px-auto w-100  pl-3"style="padding: 0.56rem;">
            <div class="h-100">
            <%= tng.content %>
            <% if Tag.all.find_by(id: tng.tag_id) == nil then %>
            <%else%>
                <% @tag_name = Tag.all.find(tng.tag_id).name%>
                <%= content_tag(:p, '#'+@tag_name ,style:'font-size:10px' ,class:'mt-1 mb-0') %>
            <%end%></div>
        </div>

        <div class="col-md-3 px-auto w-100 py-3 pr-1">
            <div class="h-100 d-flex align-items-center" style="float:right;">
            
                <div style="font-size:10px">
                    <% num = (tng.deadline-Date.today).to_i %>
                    <%if num > 0 %>
                        あと <a style="font-size:14px"><%= num %></a> 日
                    <% elsif num == 0 %>
                        <a style="font-size:13px">当日</a>
                    <%else%>
                        <a style="font-size:14px"><%= num.abs %></a> 日 経過
                    <%end%>
                </div>
            </div>
        </div>
        
        <div class="col-md-2 px-auto w-100 py-3">
            <div class="h-100 d-flex align-items-center">
                <div class="tng-edit text-center w-100">
                <%= content_tag(:div,'' ,class: 'clr_main_c w-100 text-center btn btn-link p-0 ')do %><i class="fas fa-pen "></i><%end%>
                </div>
            </div>
        </div>
    </div>
    
    <div class="row no-gutters tng-edit-form ">
        
        <div class="col-md-1 px-auto w-100">
            <%= content_tag(:div,'',style: 'background-color:'+ @clr, class:'h-100 d-flex align-items-center ') do %>
            <%end%>
        </div>
        
        <div class="col-md-11">
            <div class="w-100 p-3">
                
                <%= form_with(model: tng, local: true)do |f| %>
                    
                    <div class="input-group input-group-sm mt-1">
                        <div class="input-group-prepend">
                            <span class="input-group-text input-group-sm">
                                <%= f.label :list_id, 'お部屋',class:'m-0'%>
                            </span>
                        </div>
                        <%= f.collection_select :list_id, List.where(user_id: current_user.id),:id,:name,{} ,class: 'form-control' %>
                    </div>
                    
                    <div class="input-group input-group-sm my-2">
                        <div class="input-group-prepend">
                            <span class="input-group-text input-group-sm">
                                <%= f.label :content, '&ensp;もの&ensp;'.html_safe,class:'m-0' %>
                            </span>
                        </div>
                        <%= f.text_field :content, class: 'form-control'%>
                    </div>
                    
                    <div class="input-group input-group-sm my-2">
                        <div class="input-group-prepend">
                            <span class="input-group-text input-group-sm">
                                <%= f.label :deadline, '&ensp;期限&ensp;'.html_safe,class:'m-0' %>
                                </br>
                            </span>
                        </div>
                        <%= f.date_field :deadline,  class: 'form-control '%>
                    </div>
                    
                    <div class="input-group input-group-sm my-2">
                        <div class="input-group-prepend">
                            <span class="input-group-text input-group-sm">
                                <%= f.label :tag_id, '&ensp;タグ&ensp;'.html_safe ,class:'m-0'%>
                                </br>
                            </span>
                        </div>
                        <%= f.collection_select :tag_id, Tag.where(user_id: current_user.id) ,:id,:name,{},class: 'form-control'%>
                    </div>
                    
                    <div class="text-right">
                        <%= f.submit 'OK' , class: 'btn ml-2 btn-sm clr_sub_b clr_font_c',style: 'border-color:'+@theme.clr_font %>
                    </div>
                
                <%end%>
            
            </div>            
        </div>                   
    </div>

<%end%>

<script>
$('.tng-edit-form').hide();

</script>

<style>

</style>